<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>resrepo • resrepo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="resrepo">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">resrepo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/resrepo.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_versioning.html">Data versioning</a></li>
    <li><a class="dropdown-item" href="../articles/sharing_resrepo.html">Sharing a resrepo repository</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>resrepo</h1>
            
      

      <div class="d-none name"><code>resrepo.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="resrepo-easy-research-on-git">resrepo: easy research on git<a class="anchor" aria-label="anchor" href="#resrepo-easy-research-on-git"></a>
</h2>
<p>The aim of <code>resrepo</code> is to encourage and facilitate good
practices when setting up and managing <code>git</code> repositories for
scientific research projects. There are three main elements to this:</p>
<ul>
<li>it provides a <strong>template for a tidy repository
structure</strong> that can be used for any project, with functions that
help keeping a clear separation of code, data and results.</li>
<li>it provides functionality to help <strong>manage large data</strong>
that cannot be tracked on a git repository. This is achieved through
<strong>versioning the data and results</strong> with the use of
symlinks, allowing easy comparison of different versions (e.g. different
data filtering) and enabling the storage data outside the git
repository, potentially in directories that are backed up on the
cloud.</li>
</ul>
<div class="section level3">
<h3 id="general-overview">General overview<a class="anchor" aria-label="anchor" href="#general-overview"></a>
</h3>
<p>In <code>resrespo</code>, we keep data, code, results, and the
write-up separate. This allows for a tidy structure that can flexibly
accommodate very complex projects. Note that there are a number of
README.md files, which provide instructions and advice related to the
files that go into that particular directory.</p>
<p>If you created the repository with <code>init_resrepo</code>, the
function will automatically commit these changes for you, so that you
have a clean repository template as your first commit, and you can best
document the changes that you make as you progress.</p>
<div class="section level4">
<h4 id="resrepo-template">resrepo template<a class="anchor" aria-label="anchor" href="#resrepo-template"></a>
</h4>
<p>The first way in which <em>resrepo</em> can facilitate good practices
when managing git repositories, is to structure your folders so each
type of file has their specific location. This helps to separate your
data from your code (which is good coding practice) and creates an easy
to navigate file structure for all your output.</p>
<p>Here is a general overview of the structure:</p>
<ul>
<li>
<strong>code</strong>: this is, unsurprisingly, the folder for your
code, which may be in R, or other languages if needed.</li>
<li>
<strong>data</strong>: <code>resrepo</code> will automatically
create a <em>data</em> folder that contains two subfolders: <em>raw</em>
is intended for your raw/initial set of data, needed to start running
the analyses. <em>intermediate</em>, instead, is where most outputs
should go (e.g., modifications of the raw data, tables, plots,
intermediate input files). Because these folder may end up including
huge files, by default the content of “data” will not be uploaded to
GitHub, as it is automatically added to <code>.gitignore</code>.</li>
<li>
<strong>results</strong>: this folder should only be reserved for
final files (e.g, summary tables, plots) that are intended for
publication. Because this folder is intended for a limited number of
small files, it is expected to be uploaded on GitHub.</li>
<li>
<strong>writing</strong>: this folder is intended for the write-up
of your project. It can contain markdown files, or links to GoogleDocs
or Word documents. It is not recommended to store large files in this
folder.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="naming-your-code-scripts">Naming your code scripts<a class="anchor" aria-label="anchor" href="#naming-your-code-scripts"></a>
</h3>
<p>The names of your scripts should be informative and follow a logical
order. We recommend that you use a prefix to indicate the order of the
scripts, such as <code>s01</code>, <code>s02</code>, etc., with an
underscore separating a short but descriptive title. Avoid spaces (they
should be replaced with underscores) and capital letters (not all file
systems/languages are case sensitive). For example, a script that
downloads remote sensing data from a public server could be named
<code>s01_download_remote_sense.Rmd</code>. A script to run a clustering
analysis from the data could be named <code>s02_clustering.Rmd</code>.
Avoid naming your files starting with a number (e.g. instead of
“01_process_data.R” use “s01_process_data.R”) Do not use generic names
such as “Figure_01”, “Figure_02”, etc. for your files and folders. Use
more descriptive names as numbers change. It will make your life easier
when you will need to work again on the project.</p>
</div>
<div class="section level3">
<h3 id="set-up-data-directories">Set up data directories<a class="anchor" aria-label="anchor" href="#set-up-data-directories"></a>
</h3>
<p>For most projects, you will need some data for your scripts to work.
There are two main categories of data: “raw” data, which are primary
data (e.g.  measurements you made in the lab or the field, FASTQ files
generated by a sequencer, remote sensing data downloaded from NASA); and
“intermediate” data (data that you generated from raw, and that in turn
will be used as the base of further analysis).</p>
<p>In <code>resrepo</code>, we store data in one or more sub-directories
within <code>/data/raw</code> or <code>/data/intermediate</code>,
depending on their category. The template has a
<code>/raw/original</code> subdir, which you could use if you have a
simple project with relatively few data files, but you are free to
remove it and create alternative ones. For data that you collected or
generated, you can use any name (e.g. <code>data/raw/fastq</code>,
<code>data/raw/focal_obs</code>, etc.). If data are generated by a
script, then they should be placed in a subdirectory with the same name
of that script, implicitly documenting their provenance. So, if you
downloaded data from a remote server in a script called
<code>s01_download_remote_sense.Rmd</code>, the data should be stored in
<code>/data/raw/s01_download_remote_sense</code>. If you generated data
in a script called <code>s02_clustering.Rmd</code>, the data should be
stored in <code>/data/intermediate/s02_clustering</code>. Feel free to
have further subdirectories within these directories if you have a large
amount of data.</p>
<p>No files should be stored directly in <code>/data/raw</code> or
<code>/data/intermediate</code>, they should always be put in a first
level sub-directory. If you are not generating any intermediate data,
you can simply ignore the <code>/data/intermediate</code> directory.</p>
</div>
<div class="section level3">
<h3 id="generating-results">Generating results<a class="anchor" aria-label="anchor" href="#generating-results"></a>
</h3>
<p>Some analyses will generate outputs that we want to use in the paper
(e.g. plots or tables). We suggest that you put those in the
<code>results</code> directory, to separate them from intermediate data
(which are generally used for further analysis). As with data, we
suggest that you create a subdirectory for each script that generates
results. So, if you have a script <code>s02_clustering.Rmd</code> that
generates a plot, you should save that plot in
<code>/results/s02_clustering</code>. In this example, the same script
could generate both a large amount of data describing the membership to
clusters (which we decided to store as data) and a plot (which belongs
in results). There are many instances where the same output could be
thought as either data or results; don’t worry too much about it, as
long as you annotate your code well, you will be able to find where the
information is.</p>
</div>
<div class="section level3">
<h3 id="writing-it-all-up">Writing it all up<a class="anchor" aria-label="anchor" href="#writing-it-all-up"></a>
</h3>
<p>Git is not really designed to handle Word or OpenOffice files.
Ideally, text is kept in markdown files, but that format does not lend
itself nicely to formatting for submission (e.g. bibliography from a
reference manager). Having said that, you could, in principle, track
Word/OpenOffice documents in the <code>writing</code> directory, as they
are rarely large enough to cause trouble. If you are writing
collaboratively, you are more likely to use GoogleDoc or shared Word
documents. In that case, you can use the README.md in the
<code>writing</code> directory to store the paths to those documents. By
doing so, it means that a collaborator who has access to the repository
can also find the manuscript easily (i.e. everything is in one
place).</p>
</div>
<div class="section level3">
<h3 id="initialise-the-repository">Initialise the repository<a class="anchor" aria-label="anchor" href="#initialise-the-repository"></a>
</h3>
<p>Start by creating a blank repository on GitHub (or equivalent
server), and clone it on your computer. Instructions to do so can be
found at <a href="https://happygitwithr.com/new-github-first#new-github-first" class="external-link">this
link</a> or you can follow the gif below. For this vignette, we will
create a “resrepo_example” git repository.</p>
<div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
<p><img src="img/github_create_repo.gif" alt="Committing in RStudio" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);"></p>
</div>
<p>Then, you can clone the repository on your computer. You can do this
in RStudio by clicking on the <em>File</em> tab, then <em>New
Project…</em>, <em>Version Control</em>, <em>Git</em>, and pasting the
URL of your repository.</p>
<p>We will now use <code>resrepo</code> to initialise the repository.
First, make sure that your working directory is set within the
<code>git</code> repository:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp0eyW03/resrepo_example"</span></span></code></pre></div>
<p>We can now initialise the repository:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://evolecolgroup.github.io/resrepo/">resrepo</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/init_resrepo.html">init_resrepo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Let us look at the content of our new repository:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>You should now modify the main README.md, found at the root of the
project, to describe your project. That document will act as the landing
page of your git repository in GitHub/GitLab.</p>
</div>
<div class="section level3">
<h3 id="similar-tools">Similar tools<a class="anchor" aria-label="anchor" href="#similar-tools"></a>
</h3>
<p>Scientific projects contain both code and data: <code>git</code> is
designed to manage software code, but it is not suited to track large
data files. There are extensions of <code>git</code>, such as
<code>git-lfs</code> and <code>git-annex</code> that can handle data,
but they can be complex to set up and difficult to use, especially when
sharing your repository among collaborators. <code>resrepo</code>
encourages good habits to manage your data alongside your code in plain
<code>git</code>, making it easy to share your project with
collaborators, thus ensuring reproducible science and a tidy repository
that can used for publication of your work.</p>
<p><br></p>
<hr>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="a-step-by-step-example">A step by step example<a class="anchor" aria-label="anchor" href="#a-step-by-step-example"></a>
</h2>
<p>We will now illustrate how to populate a simple project with
<code>resrespo</code>.</p>
<p>In this project, we have gone to the field and measured several
individuals of a new imaginary species of penguin called Tux. We have
collected data on their bill length and depth, flipper length, body mass
and sex. We will store this data, of which we have a copy in the
package, as a CSV file named “tux_measurements.csv” in the
<code>data/raw/original</code> directory:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vignette_example/tux_measurements.csv"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"resrepo"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  to <span class="op">=</span> <span class="fu"><a href="../reference/path_resrepo.html">path_resrepo</a></span><span class="op">(</span><span class="st">"/data/raw/original/tux_measurements.csv"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Let’s have a look at the repository:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │           └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>We will then write a script to download data on three other species
of penguins from the <code>palmerpenguins</code> dataset. We will call
this script <code>s01_download_penguins.Rmd</code>, and store the data
in <code>data/raw/s01_download_penguins</code>.</p>
<p><code>resrepo</code> can generate a pre-edited Rmd file for you to
use as a template for your analysis . This is better than the default
template in RStudio, and we will explore some of its additional features
further below. To create a new Rmd file from the <code>resrepo</code>
template Rmd file, use the <code>create_rmd</code> function and specify
the file name and which folder it should be in (you do not need to
include the <code>.Rmd</code> file extension).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_rmd.html">create_rmd</a></span><span class="op">(</span><span class="st">"code/s01_download_penguins"</span><span class="op">)</span></span></code></pre></div>
<p>We can replace the explanatory text and examples in this Rmd with
only a simple chunk of code:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://evolecolgroup.github.io/resrepo/">resrepo</a></span><span class="op">)</span></span>
<span><span class="co"># define the output directory (named after the script) and create it</span></span>
<span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/path_resrepo.html">path_resrepo</a></span><span class="op">(</span><span class="st">"/data/raw/s01_download_penguins"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">output_dir</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">output_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># load the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"penguins"</span>, package <span class="op">=</span> <span class="st">"palmerpenguins"</span><span class="op">)</span></span>
<span><span class="co"># write the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">penguins</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">output_dir</span>, <span class="st">"palmer_penguins.csv"</span><span class="op">)</span>,</span>
<span>  row.names <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that, to set the output directory, we used the function
<code>path_resrepo</code>, which allows us to use paths relative to the
root of the git repository, irrespective of where the scripts are.
Alternatively, you could use a relative path from the script,
e.g. <code>../data/raw/s01_download_penguins</code>. The <code>..</code>
means “go up one directory”, so from the <code>code</code> directory, it
would go to the root of the repository, then into
<code>data/raw/s01_download_penguins</code>. If you want more
information on relative paths, have a look at this <a href="https://www.redhat.com/en/blog/linux-path-absolute-relative" class="external-link">link</a>.</p>
<p>Add the chunk above to our s01_download_penguins.Rmd and save it.</p>
<p>We can see the script in the <code>code</code> directory:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │           └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>You can now open the Rmd and knit it to download the data.</p>
<pre><code><span><span class="co">#&gt; processing file: s01_download_penguins.Rmd</span></span>
<span><span class="co">#&gt; output file: s01_download_penguins.knit.md</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: s01_download_penguins.pdf</span></span></code></pre>
<p>We can see that the data was saved in the right place:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │       │   └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │           ├── palmer_penguins.csv</span></span>
<span><span class="co">#&gt; │           └── renv_s01_download_penguins.json</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── s01_download_penguins.pdf</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>Note that knitting our Rmd also created the new directory
<code>results/s01_download_penguins</code> to store the knitted
markdown. Standard Rmd documents save the outputs in the same directory
as the code, which would break the rule of separation of code and
outputs. To avoid this, rmd documents created with
<code><a href="../reference/create_rmd.html">resrepo::create_rmd()</a></code>, have their knitted output stored in
the right place in results by default. In this case, this document is
pretty minimal (it just repeats the code used to download and save), but
later on we will use it to document our analysis.</p>
<p>Now that we have new files (the code to download and the resulting
data and output), we should commit our changes to the repository. In
RStudio, open the <em>Git</em> tab on the right-hand side, click the
<em>Commit</em> button, write a descriptive commit message, and then
click <em>Commit</em> to finalize.</p>
<div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
<p><img src="img/git_commit.gif" alt="Committing in RStudio" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);"></p>
</div>
<p>We now want to merge our data on the new species with the reference
dataset, and clean the data (e.g. remove missing data). We will copy
over an Rmd from the package, which was originally created with
<code><a href="../reference/create_rmd.html">resrepo::create_rmd</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vignette_example/s02_merge_clean.Rmd"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"resrepo"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  to <span class="op">=</span> <span class="fu"><a href="../reference/path_resrepo.html">path_resrepo</a></span><span class="op">(</span><span class="st">"/code/s02_merge_clean.Rmd"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>We can check that the script is in the right place:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s02_merge_clean.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │       │   └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │           ├── palmer_penguins.csv</span></span>
<span><span class="co">#&gt; │           └── renv_s01_download_penguins.json</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── s01_download_penguins.pdf</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>Have a look at this Rmd document. Note how we set all input paths at
the very beginning of a script, so that it is easy to know what is
needed to run that script. This habit makes it much easier to share the
script with others.</p>
<p>You can now knit the Rmd to merge the data and clean it.</p>
<pre><code><span><span class="co">#&gt; processing file: s02_merge_clean.Rmd</span></span>
<span><span class="co">#&gt; output file: s02_merge_clean.knit.md</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: s02_merge_clean.pdf</span></span></code></pre>
<p>We can see that the data was saved in the correct
<code>/data/intermediate</code> subdirectory:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s02_merge_clean.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   ├── README.md</span></span>
<span><span class="co">#&gt; │   │   └── <span style="color: #0000BB; font-weight: bold;">s02_merge_clean</span></span></span>
<span><span class="co">#&gt; │   │       ├── penguins_na_omit.csv</span></span>
<span><span class="co">#&gt; │   │       └── renv_s02_merge_clean.json</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │       │   └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │           ├── palmer_penguins.csv</span></span>
<span><span class="co">#&gt; │           └── renv_s01_download_penguins.json</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │   │   ├── README.md</span></span>
<span><span class="co">#&gt; │   │   └── s01_download_penguins.pdf</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">s02_merge_clean</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       └── s02_merge_clean.pdf</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>Again, note that a markdown output was placed in an appropriate
subdirectory of <code>results</code>.</p>
<p>We are now ready to do some analysis. We will start with a PCA, with
the aim of testing whether our tux penguin is clearly distinct from
other penguin species. We use a script from the package, which we copy
over to our repository:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vignette_example/s03_pca.Rmd"</span>, package <span class="op">=</span> <span class="st">"resrepo"</span><span class="op">)</span>,</span>
<span>  to <span class="op">=</span> <span class="fu"><a href="../reference/path_resrepo.html">path_resrepo</a></span><span class="op">(</span><span class="st">"/code/s03_pca.Rmd"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Open it. Again, note our input and output paths are all set at the
top of the script, to make it easy to understand what is needed to run
the script. You should now run (knit) your script.</p>
<p>Let’s check the repository once again:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s02_merge_clean.Rmd</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s03_pca.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   │   ├── README.md</span></span>
<span><span class="co">#&gt; │   │   └── <span style="color: #0000BB; font-weight: bold;">s02_merge_clean</span></span></span>
<span><span class="co">#&gt; │   │       ├── penguins_na_omit.csv</span></span>
<span><span class="co">#&gt; │   │       ├── renv_s02_merge_clean.json</span></span>
<span><span class="co">#&gt; │   │       └── renv_s03_pca.json</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">original</span></span></span>
<span><span class="co">#&gt; │       │   └── tux_measurements.csv</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │           ├── palmer_penguins.csv</span></span>
<span><span class="co">#&gt; │           └── renv_s01_download_penguins.json</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">s01_download_penguins</span></span></span>
<span><span class="co">#&gt; │   │   ├── README.md</span></span>
<span><span class="co">#&gt; │   │   └── s01_download_penguins.pdf</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">s02_merge_clean</span></span></span>
<span><span class="co">#&gt; │   │   ├── README.md</span></span>
<span><span class="co">#&gt; │   │   └── s02_merge_clean.pdf</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">s03_pca</span></span></span>
<span><span class="co">#&gt; │       ├── README.md</span></span>
<span><span class="co">#&gt; │       ├── s03_pca.pdf</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">s03_pca_files</span></span></span>
<span><span class="co">#&gt; │           └── <span style="color: #0000BB; font-weight: bold;">figure-latex</span></span></span>
<span><span class="co">#&gt; │               └── <span style="color: #BB00BB; font-weight: bold;">pca_plot-1.png</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>Now you just need to commit your changes as you did above, and we
have a full repository with data, code and results, with a clear
structure that should be easy to interpret.</p>
<div class="section level4">
<h4 id="some-tips-on-how-to-use-github">Some tips on how to use GitHub<a class="anchor" aria-label="anchor" href="#some-tips-on-how-to-use-github"></a>
</h4>
<p><strong>Commit</strong> Think carefully about your commit messages
and branch names, as they will be very useful for returning to past
changes for both you and others (for example when a project is made
publicly available). Please make them informative.</p>
<p><strong>Merge</strong> Once you merge a branch into master, kill the
branch to avoid problems in the future. Do not name a branch with the
name of a branch that has been merged/deleted recently, as this may
create problems.</p>
<p><strong>Binary files</strong> Do not upload binary data (e.g.*.rds):
changes in such files are too heavy to be handled by GitHub.</p>
</div>
<div class="section level3">
<h3 id="github-setup">GitHub setup<a class="anchor" aria-label="anchor" href="#github-setup"></a>
</h3>
<p>If you already have a ssh key, follow these steps: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys" class="external-link uri">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys</a></p>
<p>If you need to generate a new key and add it to GitHub: <strong>1.
Generate ssh key</strong> Source: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" class="external-link uri">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent</a></p>
<p><strong>2. add key to account</strong> Source: <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" class="external-link uri">https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account</a></p>
<p><strong>3. Test connection</strong> Source: <a href="https://docs.github.com/cn/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection" class="external-link uri">https://docs.github.com/cn/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection</a></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrea Manica.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
