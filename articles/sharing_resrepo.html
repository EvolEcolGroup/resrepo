<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sharing a resrepo repository • resrepo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sharing a resrepo repository">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">resrepo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/resrepo.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_versioning.html">Data versioning</a></li>
    <li><a class="dropdown-item" href="../articles/sharing_resrepo.html">Sharing a resrepo repository</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sharing a resrepo repository</h1>
            
      

      <div class="d-none name"><code>sharing_resrepo.Rmd</code></div>
    </div>

    
    
<p>This vignette explains how to share a <code>resrepo</code>
repository, either with collaborators (or anyone who will work on it) or
with the public, for example as part of a publication.</p>
<p>When sharing with collaborators, they will simply need to:</p>
<ol style="list-style-type: decimal">
<li>Clone the <code>resrepo</code> repository</li>
<li>Obtain the data they need</li>
<li>And set up symlinks to the location of the data</li>
</ol>
<p>When sharing with the public or with reviewers, you will additionally
need to:</p>
<ol start="4" style="list-style-type: decimal">
<li>Upload the data to a publicly available location (e.g. Zenodo,
Dryad, OSF, etc..)</li>
<li>Provide a script that downloads the data automatically.</li>
</ol>
<div class="section level2">
<h2 id="cloning-a-resrepo-repository-and-downloading-data">1 &amp; 2. Cloning a <code>resrepo</code> repository and downloading
data<a class="anchor" aria-label="anchor" href="#cloning-a-resrepo-repository-and-downloading-data"></a>
</h2>
<p>The following GIF shows how to clone a <code>resrepo</code>
repository using GitHub and RStudio.</p>
<div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
<p><img src="img/git_clone_repo.gif" alt="Cloning a repository using GitHub and RStudio" style="max-width: 100%; height: auto; border: 1px solid #ccc; box-shadow: 2px 2px 5px rgba(0,0,0,0.1);"></p>
</div>
<p>You’ve cloned a <code>resrepo</code> repository with code, but the
data required for the analyses are located elsewhere, outside the cloned
repository.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #00BB00;">check_data_sources.R</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s02_merge_clean.Rmd</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s03_pca.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">archive</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   ├── data_sources.csv</span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">version_meta</span></span></span>
<span><span class="co">#&gt; │       ├── initial.meta</span></span>
<span><span class="co">#&gt; │       ├── intermediate_in_use.meta</span></span>
<span><span class="co">#&gt; │       ├── raw_in_use.meta</span></span>
<span><span class="co">#&gt; │       └── starting.meta</span></span>
<span><span class="co">#&gt; ├── resrepo_manual.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>As you can see from the above tree, <code>data</code> is an empty
folder, this is because no data are stored in the repository.</p>
<p>Therefore, you need to take two steps:</p>
<ul>
<li>Download the data from where they are stored and place them in a
location of your choice (e.g. a folder on your local machine, a synced
folder, etc..)</li>
<li>Set up the symlinks to point to the location of the data you just
downloaded</li>
</ul>
<p>Moreover, as you can see, this repository contains the folder
<code>version_meta</code> which indicates to us that this repository has
been versioned. If you are not familiar with the concept of versioning,
please check the <code>data versioning</code> vignette.</p>
<p>As an example, we will create a directory to act as our external data
storage folder. Note that we we are creating this folder in the
temporary directory, but you should choose a location anywhere on your
local machine. We will call this folder
<code>external_data_storage_new</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new external folder for data</span></span>
<span><span class="va">external_data_storage_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"external_data_storage_new"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">external_data_storage_new</span><span class="op">)</span></span></code></pre></div>
<p>It is important that the external data folder where you store your
data is structured in the exact same way as your <code>data</code>
folder within your <code>resrepo</code> repository. Otherwise
<code>resrepo</code> will not be able to find the files.</p>
<p>Ideally, the directory structure of the data shared with you for this
project should already match the structure of the <code>data</code>
folder in the repository. Check with the person who shared the
repository with you if you are unsure about this.</p>
<p>In the following example, we will create the substructure of the
<code>data</code> folder, which contains <code>starting/raw</code> and
<code>initial/intermediate</code> directories,</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">intermediate_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="st">"external_data_storage_new/initial/intermediate"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">raw_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"external_data_storage_new/starting/raw"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">intermediate_path</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">raw_path</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>And then we will copy the raw data into
<code>external_data_storage_new/starting/raw</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"vignette_example/tux_measurements.csv"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"resrepo"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  to <span class="op">=</span> <span class="va">raw_path</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setting-up-symlinks-to-data">3. Setting up symlinks to data<a class="anchor" aria-label="anchor" href="#setting-up-symlinks-to-data"></a>
</h2>
<p>If you have a repository that is not versioned (it does not contain
any version.meta), then you can simply link your external data storage
location to the <code>data</code> folder in your repository using the
<code>data_dir_link</code> function:</p>
<p>Because this repository has been versioned, we need to set up
versioning in our local repository. Now that our
<code>external_data_storage_new</code> folder contains the data, we can
do this using <code>version_setup</code>.</p>
<p>We need to supply the argument <code>resources_path</code> to
<code>version_setup</code>, which is the path to the external data
storage folder:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/version_setup.html">version_setup</a></span><span class="op">(</span>quiet <span class="op">=</span> <span class="cn">TRUE</span>, resources_path <span class="op">=</span> <span class="va">external_data_storage_new</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">.</span></span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #00BB00;">check_data_sources.R</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">code</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s01_download_penguins.Rmd</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BB00;">s02_merge_clean.Rmd</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #00BB00;">s03_pca.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">data</span></span></span>
<span><span class="co">#&gt; │   ├── README.md</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">archive</span></span></span>
<span><span class="co">#&gt; │   │   └── README.md</span></span>
<span><span class="co">#&gt; │   ├── data_sources.csv</span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BBBB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #00BBBB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">version_meta</span></span></span>
<span><span class="co">#&gt; │       ├── initial.meta</span></span>
<span><span class="co">#&gt; │       ├── intermediate_in_use.meta</span></span>
<span><span class="co">#&gt; │       ├── raw_in_use.meta</span></span>
<span><span class="co">#&gt; │       └── starting.meta</span></span>
<span><span class="co">#&gt; ├── resrepo_manual.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">results</span></span></span>
<span><span class="co">#&gt; │   └── README.md</span></span>
<span><span class="co">#&gt; ├── <span style="color: #00BBBB; font-weight: bold;">versions</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">writing</span></span></span>
<span><span class="co">#&gt;     └── README.md</span></span></code></pre></div>
<p>We can now see that we have <code>data/intermediate</code> and
<code>data/raw</code> folders. These are both links which point to the
<code>versions</code> folder, and <code>versions</code> points to our
external data storage (easy isn’t it!);</p>
<p>data/intermediate -&gt; versions -&gt;
external_data_storage_new/initial/intermediate data/raw -&gt; versions
-&gt; external_data_storage_new/starting/raw</p>
<p>We can also check the structure of the
<code>external_data_storage_new</code> folder:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">external_data_storage_new</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpxAIUII/external_data_storage_new</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">initial</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">intermediate</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">starting</span></span></span>
<span><span class="co">#&gt;     └── <span style="color: #0000BB; font-weight: bold;">raw</span></span></span>
<span><span class="co">#&gt;         └── tux_measurements.csv</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="downloading-data-from-a-public-location">4. Downloading data from a public location<a class="anchor" aria-label="anchor" href="#downloading-data-from-a-public-location"></a>
</h2>
<p>If you are sharing your repository with the public, you will need to
upload your data to a publicly available location (e.g. Zenodo, Dryad,
OSF, etc..) and provide a script to download the data. You may also
require data from other public repositories (e.g. GBIF, GenBank, etc..).
The script to download the data should be placed in the
<code>code</code> folder of your <code>resrepo</code> repository, and
should ideally be named <code>s0_download_data.Rmd</code>. It should
download all the data from the different sources and place them in the
appropriate directory (see Section 2 above).</p>
<p>After doing so, you can then use <code>version_setup</code> to set up
the symlinks to the data as shown in Section 3 above.</p>
<p>You can find an example of an <code>s0_download_data.Rmd</code> in
the <code>inst/vignette_example</code> folder of the
<code>resrepo</code> package or see the code below:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, we will create an external data folder to store</span></span>
<span><span class="co"># the data and will link to it from the `data/raw` folder.</span></span>
<span><span class="co"># You can see how to do this in the `sharing_resrepo` vignette.</span></span>
<span></span>
<span><span class="co"># create new external folder for data</span></span>
<span><span class="va">external_data_storage_review</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="st">"external_data_storage_review"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">external_data_storage_review</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load inborutils to download from zenodo</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">inborutils</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download data from zenodo</span></span>
<span><span class="va">doi</span> <span class="op">&lt;-</span> <span class="st">"10.5281/zenodo.17287488"</span></span>
<span><span class="fu">inborutils</span><span class="fu">::</span><span class="fu">download_zenodo</span><span class="op">(</span><span class="va">doi</span>, <span class="va">external_data_storage_review</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we can see that the files have been downloaded to</span></span>
<span><span class="co"># our external data folder.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">external_data_storage_review</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrea Manica.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
